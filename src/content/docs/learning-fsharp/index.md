---
layout: page
title: "Learning F#"
description: "Functional programming languages need a different approach"
nav: learning-fsharp
hasComments: 1
---

関数型言語は、標準的な命令型言語とは大きく異なり、最初は習得が難しいと感じることがあります。このページでは、F#を効果的に学ぶためのヒントを提供します。

## F#を初心者として学ぶアプローチ ##

C#やJavaなどの言語の経験がある場合、キーワードやライブラリに馴染みがなくても、他の類似言語で書かれたソースコードをかなり良く理解できることに気づいたでしょう。これは、すべての命令型言語が同じ思考方法を使用しており、ある言語での経験を別の言語に簡単に転用できるためです。

多くの人と同様に、新しいプログラミング言語を学ぶ際の標準的なアプローチは、既に馴染みのある概念の実装方法を見つけることかもしれません。「変数の割り当て方は？」や「ループの作り方は？」といった質問をし、これらの答えを得ることで、基本的なプログラミングをすぐに始められるでしょう。

F#を学ぶ際は、**古い命令型の概念を持ち込もうとしないでください**。純粋な関数型言語には、変数もループもオブジェクトもありません！

確かに、F#はハイブリッド言語でこれらの概念をサポートしています。しかし、初心者の心構えで始めれば、より速く学ぶことができるでしょう。

## 考え方を変える ##

関数型プログラミングは単なるスタイルの違いではなく、プログラミングに対する全く異なる考え方であることを理解することが重要です。これは、真のオブジェクト指向プログラミング（たとえばSmalltalkにおける）が、Cのような従来の命令型言語とは異なる考え方であるのと同じです。

F#は非関数型のスタイルも許容しますが、既に馴染みのある習慣を保持したくなる誘惑があります。関数型の考え方を本当に変えずに、F#を非関数型の方法で使用することもできますが、そうすると何を逃しているかに気づかないかもしれません。F#を最大限に活用し、関数型プログラミング全般に流暢で快適になるためには、命令型ではなく関数型で考えることが重要です。

最も重要なことは、特に関数と型システムに関わる中核的な概念について、F#がどのように機能するかを正確に理解するために時間と労力を費やすことです。ですので、「[関数型思考](../series/thinking-functionally.html)」と「[F#の型を理解する](../series/understanding-fsharp-types.html)」のシリーズを何度も読み返し、例を試し、本格的なコーディングを始める前にこれらのアイデアに慣れてください。関数と型の仕組みを理解していないと、生産性を上げるのが難しくなるでしょう。

## すべきことと避けるべきこと ##

以下は、関数型思考を促進するためのすべきことと避けるべきことのリストです。最初は難しく感じるかもしれませんが、外国語を学ぶのと同じように、思い切って飛び込み、地元の人のように話すことを強制する必要があります。

* 初心者の段階では、`mutable`キーワードを**一切**使用しないでください。可変状態という杖なしで複雑な関数をコーディングすることで、関数型パラダイムを本当に理解することができます。
* `for`ループや`if-then-else`を使用しないでください。ブール値のテストやリストの再帰にはパターンマッチングを使用してください。
* 「ドット記法」を使用しないでください。オブジェクトに「ドットを使ってアクセスする」代わりに、すべてに関数を使用するようにしてください。つまり、`"hello".Length`ではなく`String.length "hello"`と書きます。余計な作業に思えるかもしれませんが、この作業方法は`List.map`のようなパイプや高階関数を使用する際に不可欠です。また、自分でメソッドを書くこともしないでください！詳細は[この投稿を参照してください](../posts/type-extensions.html#downsides-of-methods)。
* その結果として、クラスを作成しないでください。タプル、レコード、共用体などの純粋なF#の型のみを使用してください。
* デバッガーを使用しないでください。不正確なコードを見つけて修正するためにデバッガーに頼ってきた場合、ショックを受けるでしょう。F#では、コンパイラがより厳格であるため、そこまで到達しないかもしれません。もちろん、コンパイラを「デバッグ」してその処理をステップ実行するツールはありません。コンパイラエラーをデバッグするための最良のツールは頭脳であり、F#はそれを使うことを強制します！

一方で：

* 特に共用体型を含む「小さな型」をたくさん作成してください。これらは軽量で簡単であり、その使用はドメインモデルを文書化し、正確性を確保するのに役立ちます。
* `list`型と`seq`型、およびそれらに関連するライブラリモジュールを理解してください。`List.fold`や`List.map`のような関数は非常に強力です。これらの使い方を理解すれば、高階関数全般の理解に向けて順調に進むことができます。
* コレクションモジュールを理解したら、再帰を避けるようにしてください。再帰はエラーを起こしやすく、適切な末尾再帰になっているかを確認するのが難しい場合があります。`List.fold`を使用すれば、そのような問題は決して起こりません。
* パイプ演算子（`|>`）と合成演算子（`>>`)をできるだけ多く使用してください。このスタイルは、`f(g(x))`のようなネストされた関数呼び出しよりもはるかに慣用的です。
* 部分適用の仕組みを理解し、ポイントフリー（暗黙的）スタイルに慣れるよう努めてください。
* インタラクティブウィンドウを使用してコードフラグメントをテストしながら、段階的にコードを開発してください。盲目的に大量のコードを作成し、それをすべて一度にコンパイルしようとすると、多くの痛みを伴う、デバッグが困難なコンパイルエラーに直面する可能性があります。

## トラブルシューティング ##

初心者が犯す非常によくある一連のエラーがあります。コードのコンパイルに苦労している場合は、「[F#のトラブルシューティング](../troubleshooting-fsharp.html)」ページをお読みください。